(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{352:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(113),s=a(35),l=a(318),c=a(41),d=a(118),f=a(135),m=a.n(f),u=(a(271),a(161)),b=a.n(u),y=a(117),g=a(104),p=a(346),x=a(335),h=a(338),D=a(341),O=a(274),S=a.n(O),v=a(273),E=a.n(v),M=a(353),N=function(e){var t,a,r=e.data,o=e.from,i=e.minVisible,s=e.to,l=e.range,c=[m()(r[0]).toDate(),m()(r[r.length-1]).toDate()],d=c[0],f=c[1],u=m()(o).toDate(),b=s?m()(s).toDate():m()(o).add(l,"days").toDate(),y=l||m()(b).diff(m()(u),"days"),g=m()(u).isSameOrAfter(d)&&m()(u).isSameOrBefore(f),p=m()(b).isSameOrAfter(d)&&m()(b).isSameOrBefore(f);g||p?p?m()(b).isSameOrAfter(u)?(t=u,a=b):(t=b,a=u):m()(b).isSameOrAfter(u)?(t=u,a=f):(t=d,a=u):y>=0?(t=m()(f).subtract(i,"days").toDate(),a=f):(t=d,a=m()(d).add(i,"days").toDate());var x=Math.abs(m()(a).diff(t,"days"));if(x>=i)return{from:m()(t).format(n.INNER),to:m()(a).format(n.INNER),range:x,data:r.filter((function(e,n){return m()(e).isSameOrAfter(t)&&m()(e).isSameOrBefore(a)}))};if(m()(t).isSame(d)){var h=m()(t).add(i,"days").isBefore(f),D=h?m()(t).add(i,"days").toDate():m()(f).toDate();return{from:m()(t).format(n.INNER),to:m()(D).format(n.INNER),range:h?i:m()(t).diff(m()(D),"days"),data:r.filter((function(e,a){return m()(e).isSameOrAfter(t)&&m()(e).isSameOrBefore(D)}))}}if(m()(a).isSame(f)){var O=m()(a).subtract(i,"days").isAfter(d),S=O?m()(a).subtract(i,"days").toDate():m()(d).toDate();return{from:m()(S).format(n.INNER),to:m()(a).format(n.INNER),range:O?i:m()(a).diff(m()(S),"days"),data:r.filter((function(e,t){return m()(e).isSameOrBefore(a)&&m()(e).isSameOrAfter(S)}))}}return{from:m()(t).format(n.INNER),to:m()(t).add(i,"days").format(n.INNER),range:i,data:r.filter((function(e,a){return m()(e).isSameOrAfter(t)&&m()(e).isSameOrBefore(m()(t).add(i,"days"))}))}};!function(e){e.INNER="YYYY-MM-DD",e.DISPLAY="DD MMM YYYY",e.DISPLAY_NO_YEAR="DD MMM",e.MONTH="MMM"}(n||(n={}));var j=Object(g.a)({container:{borderRadius:9},btnStyle:{backgroundColor:"white",height:32,width:32}}),w=function(e){var t=e.data,a=e.minVisible,i=Object(M.a)().t,s=t.sort((function(e,t){return m()(e.date).format("YYYYMMDD")-m()(t.date).format("YYYYMMDD")})).map((function(e){return m()(e.date).format(n.INNER)})),f=j(),u=Object(r.useState)(!1),g=Object(c.a)(u,2),O=g[0],v=g[1],w=Object(r.useState)({from:s[s.length-1],range:-a}),A=Object(c.a)(w,2),I=A[0],Y=A[1],B=Object(r.useRef)(),R=Object(r.useRef)();Object(r.useEffect)((function(){var e=N({data:s,minVisible:a,from:I.from,range:-Math.abs(I.range)});return R.current=new b.a(B.current,{type:"line",data:{labels:s,datasets:[{label:i("dataType.infected"),borderColor:Object(y.a)(d.b.RISKY).textInBlueishBg,backgroundColor:Object(y.a)(d.b.RISKY).textInBlueishBg,data:Object(l.a)(t.map((function(e){return null===e||void 0===e?void 0:e.infectedNumber})))},{label:i("dataType.recovered"),borderColor:Object(y.a)(d.b.SAFE).textInBlueishBg,backgroundColor:Object(y.a)(d.b.SAFE).textInBlueishBg,data:Object(l.a)(t.map((function(e){return e.recoveredNumber})))},{label:i("dataType.dead"),borderColor:Object(y.a)(d.b.DANGEROUS).textInBlueishBg,backgroundColor:Object(y.a)(d.b.DANGEROUS).textInBlueishBg,data:Object(l.a)(t.map((function(e){return e.deadNumber})))}]},options:{elements:{line:{fill:!1}},legend:{display:!1},tooltips:{mode:"index",intersect:!1,enabled:!1,custom:function(e){var t=document.getElementById("chartjs-tooltip");if(t||((t=document.createElement("div")).id="chartjs-tooltip",t.innerHTML="<table></table>",document.body.appendChild(t)),0!==e.opacity){if(t.classList.remove("above","below","no-transform"),e.yAlign?t.classList.add(e.yAlign):t.classList.add("no-transform"),e.body){var a=e.title||[],r=e.body.map((function(e){return e.lines})),o="<thead>";a.forEach((function(e){o+='<tr><th style="color: #2C3D97; font-weight: 500; font-size: 14px; line-height: 16px; text-align: left; ">'+m()(e).format(n.DISPLAY)+"</th></tr>"})),o+="</thead><tbody>",r.forEach((function(t,a){var n="color: "+e.labelColors[a].backgroundColor+"; ";n+="font-weight: 400; ",n+="font-size: 14px; ",n+="line-height: 16px; ",o+='<tr><td style="'+(n+="text-align: left; ")+'">'+t+"</td></tr>"})),o+="</tbody>",t.querySelector("table").innerHTML=o}var i=B.current.getBoundingClientRect();t.style.opacity=1,t.style.zIndex=1e4,t.style.transform="translate(10px, -100%)",t.style.padding="8px 10px",t.style.position="absolute",t.style.backgroundColor="white",t.style.borderRadius="6px",t.style.left=i.left+window.pageXOffset+e.caretX+"px",t.style.top=i.top+window.pageYOffset+e.caretY+"px",t.style.fontFamily="Rubik",t.style.fontSize=e.bodyFontSize+"px",t.style.fontStyle=e._bodyFontStyle,t.style.pointerEvents="none"}else t.style.opacity=0}},scales:{xAxes:[{position:"top",type:"time",time:{unit:"day",minUnit:"day",displayFormats:{day:"DD"}},ticks:{padding:24,min:e.from,max:e.to,fontColor:"#2C3D97",fontFamily:"Rubik",fontSize:16,fontStyle:"bold"},gridLines:{drawBorder:!1}}],yAxes:[{position:"right",gridLines:{display:!1,drawBorder:!1},ticks:{beginAtZero:!0,padding:16,maxTicksLimit:6,fontFamily:"Rubik",fontStyle:"normal",fontSize:12,fontColor:"rgba(123, 129, 163, 0.5)"}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x",rangeMin:{x:new Date(s[0]).setHours(new Date(s[0]).getHours()-4)},rangeMax:{x:new Date(s[s.length-1]).setDate(new Date(s[s.length-1]).getDate())},onPan:function(){v(!0)},onPanComplete:function(e){var t=e.chart,a=t.scales["x-axis-0"].ticks[0],n=t.scales["x-axis-0"].ticks.length-1;Y({from:m()(a).format("[".concat(m()().year(),"]-MM-DD")),range:n}),v(!1)}},zoom:{enabled:!1,mode:"x",rangeMin:{x:new Date(s[0]).setHours(new Date(s[0]).getHours()-4)},rangeMax:{x:new Date(s[s.length-1]).setDate(new Date(s[s.length-1]).getDate())},onZoom:function(){}}}}}}),function(){R.current&&R.current.destroy&&R.current.destroy()}}),[s]);var k=function(e){var t,a,n,r,o=e.from,i=e.to;(null===(t=R.current)||void 0===t||null===(a=t.options)||void 0===a||null===(n=a.scales)||void 0===n||null===(r=n.xAxes)||void 0===r?void 0:r[0].ticks)&&(R.current.options.scales.xAxes[0].ticks.min=o,R.current.options.scales.xAxes[0].ticks.max=i,R.current.update(),Y({from:e.from,range:e.range}))};return o.a.createElement(p.a,{pt:2,pr:2,pb:2,bgcolor:"secondary.main",className:f.container},o.a.createElement(p.a,{pl:2,pb:2},o.a.createElement(x.a,{container:!0,justify:"space-between"},o.a.createElement(h.a,{variant:"subtitle1"},function(){var e=N({data:s,minVisible:a,from:I.from,range:I.range}).data.map((function(e){return m()(e).format("MMMM")}));return Object(l.a)(new Set(e))}().join("-")),o.a.createElement(x.a,{item:!0,className:"actions"},o.a.createElement(x.a,{container:!0},o.a.createElement(D.a,{className:f.btnStyle,onClick:function(){var e=I.from,t=I.range,n=N({data:s,minVisible:a,from:e,range:-Math.abs(t)});k(n)},size:"small"},o.a.createElement(E.a,null)),o.a.createElement(p.a,{m:1}),o.a.createElement(D.a,{className:f.btnStyle,onClick:function(){var e=I.from,t=I.range,n=N({data:s,minVisible:a,from:e,range:t}),r=N({data:s,minVisible:a,from:n.to,range:Math.abs(t)});k(r)},size:"small"},o.a.createElement(S.a,null)))))),o.a.createElement(p.a,{style:{cursor:O?"grabbing":"grab"}},o.a.createElement("canvas",{id:"myChart",ref:B})))};t.default=function(){var e=Object(r.useContext)(s.a),t=e.zones,a=e.selectedZoneId,n=Object(M.a)().t,l=Object(i.a)(a,t),c=((null===l||void 0===l?void 0:l.properties)||{}).history,d=void 0===c?[]:c;return o.a.createElement(p.a,{mt:4,mb:4},o.a.createElement(p.a,{mb:1},o.a.createElement(h.a,{variant:"subtitle1"},n("history.title"))),o.a.createElement(w,{data:d,minVisible:8}))}}}]);
//# sourceMappingURL=Graph.e72991a9.chunk.js.map