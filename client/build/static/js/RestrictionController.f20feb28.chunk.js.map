{"version":3,"sources":["utils/getSelectedZoneObj.ts","components/Restrictions/Editor.tsx","components/Restrictions/RestrictionController.tsx"],"names":["getSelectedZoneObjById","id","zones","find","zone","_id","Editor","props","restrictions","handleSave","editor","useRef","useEffect","current","EditorJS","holder","tools","header","class","Header","inlineToolbar","list","List","data","destroy","onClick","save","then","RestrictionController","socket","useContext","StateContext","selectedZoneId","selectedZone","style","border","properties","emit","zoneId","once"],"mappings":"mGAEA,kCAAO,IAAMA,EAAyB,SAACC,GAAoC,IAAxBC,EAAuB,uDAAP,GACjE,OAAOA,EAAMC,MAAK,SAACC,GAAD,OAAUA,EAAKC,MAAQJ,O,mIC+C5BK,EAxCwB,SAACC,GAAW,IACzCC,EAA6BD,EAA7BC,aAAcC,EAAeF,EAAfE,WAChBC,EAASC,mBAsBf,OArBAC,qBAAU,WAeR,OAdAF,EAAOG,QAAU,IAAIC,IAAS,CAC5BC,OAAQ,WACRC,MAAO,CACLC,OAAQ,CACNC,MAAOC,IACPC,cAAe,CAAC,SAElBC,KAAM,CACJH,MAAOI,IACPF,eAAe,IAGnBG,KAAMf,IAED,WAAO,IAAD,EACgB,GAA3B,UAAGE,EAAOG,eAAV,aAAG,EAAgBW,WACjB,UAAAd,EAAOG,eAAP,SAAgBW,cAGnB,CAAChB,IAEF,oCACE,yBAAKP,GAAG,aACR,4BACEwB,QAAS,WACPf,EAAOG,QAAQa,OAAOC,MAAK,SAACJ,GAC1Bd,EAAWc,QAHjB,UCDSK,UA3BsD,SACnErB,GACI,IAAD,EACKsB,EAAWtB,EAAXsB,OADL,EAE+BC,qBAAWC,KAArC7B,EAFL,EAEKA,MAAO8B,EAFZ,EAEYA,eACTC,EAAoBjC,YAAuBgC,EAAgB9B,GAYjE,OACE,yBAAKgC,MAAO,CAAEC,OAAQ,mBACpB,kBAAC,EAAD,CACE3B,aAAY,OAAEyB,QAAF,IAAEA,GAAF,UAAEA,EAAcG,kBAAhB,aAAE,EAA0B5B,aACxCC,WAda,SAACc,GAElBM,EAAOQ,KAAK,oBAAqB,CAC/BC,OAAQN,EACRxB,aAAce,IAEhBM,EAAOU,KAAK,6BAA6B,WACvCV,EAAOQ,KAAK","file":"static/js/RestrictionController.f20feb28.chunk.js","sourcesContent":["import { Zone } from \"../types/zone\";\r\n\r\nexport const getSelectedZoneObjById = (id: string, zones: Zone[] = []) => {\r\n  return zones.find((zone) => zone._id === id);\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\nimport EditorJS from \"@editorjs/editorjs\";\nimport Header from \"@editorjs/header\";\nimport List from \"@editorjs/list\";\n\nexport interface EditorProps {\n  restrictions: any;\n  handleSave: (data: any) => void;\n}\n\nconst Editor: React.SFC<EditorProps> = (props) => {\n  const { restrictions, handleSave } = props;\n  const editor = useRef<any>();\n  useEffect(() => {\n    editor.current = new EditorJS({\n      holder: \"editorjs\",\n      tools: {\n        header: {\n          class: Header,\n          inlineToolbar: [\"link\"],\n        },\n        list: {\n          class: List,\n          inlineToolbar: true,\n        },\n      },\n      data: restrictions,\n    });\n    return () => {\n      if(editor.current?.destroy){\n        editor.current?.destroy();\n      }\n    };\n  }, [restrictions]);\n  return (\n    <>\n      <div id=\"editorjs\" />\n      <button\n        onClick={() => {\n          editor.current.save().then((data: any) => {\n            handleSave(data);\n          });\n        }}\n      >\n        Save\n      </button>\n    </>\n  );\n};\n\nexport default Editor;\n","import React, { useContext } from \"react\";\nimport { StateContext } from \"../../state/StateContext\";\nimport { getSelectedZoneObjById } from \"../../utils/getSelectedZoneObj\";\nimport Editor from \"./Editor\";\n\nexport interface RestrictionControllerProps {\n  socket: any;\n}\n\nconst RestrictionController: React.SFC<RestrictionControllerProps> = (\n  props\n) => {\n  const { socket } = props;\n  const { zones, selectedZoneId } = useContext(StateContext);\n  const selectedZone: any = getSelectedZoneObjById(selectedZoneId, zones);\n\n  const handleSave = (data: any) => {\n\n    socket.emit(\"edit_restrictions\", {\n      zoneId: selectedZoneId,\n      restrictions: data,\n    });\n    socket.once(\"edit_restrictions_success\", () => {\n      socket.emit(\"initial_data\");\n    });\n  };\n  return (\n    <div style={{ border: \"1px solid #333\" }}>\n      <Editor\n        restrictions={selectedZone?.properties?.restrictions}\n        handleSave={handleSave}\n      />\n    </div>\n  );\n};\n\nexport default RestrictionController;\n"],"sourceRoot":""}