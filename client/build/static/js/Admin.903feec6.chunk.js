(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[7],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.find((function(t){return t._id===e}))}},113:function(e,t,n){"use strict";var o,r;n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),function(e){e.DANGEROUS="DANGEROUS",e.RISKY="RISKY",e.SAFE="SAFE"}(o||(o={})),function(e){e.DISTRICT="DISTRICT",e.CITY="CITY",e.REGION="REGION",e.COUNTRY="COUNTRY"}(r||(r={}))},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(138),r=function(e){var t,n,r,a;switch(Object(o.a)()){case"uz":a=null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.displayNameUz;break;case"ru":a=null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.displayNameRu;break;default:a=null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r.displayNameUz}return a}},115:function(e,t,n){"use strict";var o=n(113);t.a=function(e,t){var n="",r="",a="",i="";switch(e){case o.b.DANGEROUS:n="#EA5C73",r="#FF4967",a=t&&t("selectedZoneName.statusBadge.dangerous"),i="#ff0c0c26";break;case o.b.RISKY:n="#EF7C38",r="#FF9635",a=t&&t("selectedZoneName.statusBadge.warning"),i="#ffeb0159";break;case o.b.SAFE:n="#87D03F",r="#87D03F",a=t&&t("selectedZoneName.statusBadge.safe"),i="#8ff8293d"}return{textInWhiteBg:n,textInBlueishBg:r,text:a,bgColor:i}}},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(38),r=function(){return o.a.language||"undefined"!==typeof window&&window.localStorage.i18nextLng||"uz"}},162:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(128),i=n.n(a),l=(n(152),n(194),n(113)),c=n(45),u=function(e){var t=e||[],n=Object(c.a)(t,4),o=n[0],r=n[1],a=n[2];return[[n[3],a],[r,o]]},s=n(115),p=n(114),d=function(e){var t=i.a.DomUtil.create("div"),n=i.a.DomUtil.create("div");t.type=n.type="button",t.title="Zoom in",n.title="Zoom out",t.innerHTML="+",n.innerHTML="-",t.style.cursor=n.style.cursor="pointer",t.style.textAlign=n.style.textAlign="center",t.style.width=n.style.width="52px",t.style.height=n.style.height="52px",t.style.borderRadius=n.style.borderRadius="32px",t.style.background=n.style.background="#ffffff",t.style.boxShadow=n.style.boxShadow="0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)",t.style.lineHeight=n.style.lineHeight="52px",t.style.margin=n.style.margin="8px 0",t.style.fontWeight=n.style.fontWeight="500",t.style.fontSize=n.style.fontSize="28px",t.style.fontFamily=n.style.fontFamily="Rubik",t.style.color=n.style.color="#242b43",t.onmouseover=function(){t.style.boxShadow="0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12)"},n.onmouseover=function(){n.style.boxShadow="0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12)"},t.onmouseout=function(){t.style.boxShadow="0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)"},n.onmouseout=function(){n.style.boxShadow="0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)"},t.onclick=function(){e.zoomIn(1),console.log("+ buttonClicked")},n.onclick=function(){e.zoomOut(1),console.log("- buttonClicked")};var o=i.a.DomUtil.create("div");return o.appendChild(t),o.appendChild(n),o},f=n(105),v=n(472),g=n(111),x=n(37),m=n(47);t.a=function(e){var t=e.closeBottomSheet,a=Object(o.useContext)(x.a),c=a.zones,b=void 0===c?[]:c,y=a.selectedZoneId,h=a.dispatch,O=Object(g.a)(y,b),w=Object(v.a)().t,S=Object(f.a)((function(e){return e.breakpoints.up("md")})),E=Object(o.useRef)(),F=Object(o.useRef)(),R=Object(o.useRef)(),k=Object(o.useRef)(),N=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case l.b.DANGEROUS:t=o?"#FA0303":"#FB3535",n=o?.3:.2;break;case l.b.RISKY:t="#FAFF00",n=o?.4:.2;break;case l.b.SAFE:t=o?"#23FF00":"#23FD00",n=o?.5:.2;break;default:t="#23FD00",n=.2}return{fillColor:t,fillOpacity:n}},z=function(e){var t,n,o=null===(t=e.feature)||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.status,r=N(o,!0),a=r.fillColor,i=r.fillOpacity;e.setStyle({fillColor:a,fillOpacity:i})},C=function(e){var t,o=e.lat,r=e.lng,a=e.zoom,l=void 0===a?12:a;delete i.a.Icon.Default.prototype._getIconUrl,i.a.Icon.Default.mergeOptions({iconRetinaUrl:n(195),iconUrl:n(196),shadowUrl:n(197)}),null===(t=F.current)||void 0===t||t.setView({lat:o,lng:r},l,{animate:!0}),k.current=new i.a.Marker({lat:o,lng:r}),k.current.addTo(F.current)};return Object(o.useEffect)((function(){}),[O]),Object(o.useEffect)((function(){var e,n=new URLSearchParams(window.location.search),o=n.get("lat"),r=n.get("lng"),a=n.get("zoom"),c=o&&parseFloat(o)||40.92930626579717,f=r&&parseFloat(r)||64.61999498705462,v=a&&parseFloat(a)||6;F.current=i.a.map(E.current,{renderer:i.a.canvas({padding:1}),zoomControl:!1});i.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',edgeBufferTiles:2}).addTo(F.current),F.current.setView([c,f],v),e=i.a.geoJSON(b,{style:function(e){var t,n=null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.status,o=N(n);return{fillColor:o.fillColor,fillOpacity:o.fillOpacity,color:"#A4A2AE",weight:2}},onEachFeature:function(n,o){var r,a,i,c,u;o.bindPopup('\n        <style>\n        .custom-popup-style .leaflet-popup-content-wrapper {\n          background: #FFFFFF;\n          box-shadow: 0px 4px 40px rgba(0, 30, 89, 0.09);\n          border-radius: 11px;\n        }\n        .custom-popup-style .leaflet-popup-tip {\n          box-shadow: 0px 4px 40px rgba(0, 30, 89, 0.09);\n        }\n        .custom-popup-style .title-container {\n          display: flex;\n          align-items: center;\n          margin-bottom: 8px;\n          margin-right: 8px;\n          position: relative;\n        }\n        .custom-popup-style .zone-status-pin {\n          display: inline-block;\n          width: 8px;\n          height: 8px;\n          border-radius: 4px;\n          margin-right: 5px;\n        }\n        .custom-popup-style .zone-name {\n          font-family: Rubik;\n          font-size: 16px;\n          font-weight: 500;\n          line-height: 16px;\n          color: #242B43;\n          margin: 0;\n        }\n        .custom-popup-style .data {\n          font-family: Rubik;\n          font-size: 14px;\n          font-weight: 500;\n          line-height: 20px;\n          margin: 0;\n        }\n        </style>\n        <div class=\'title-container\'>\n          <span class="zone-status-pin" style="\n            background-color: '.concat(Object(s.a)(null===(r=n.properties)||void 0===r?void 0:r.status).textInBlueishBg,'\n          "></span>\n          <h5 class="zone-name">').concat(Object(p.a)(n),'</h5>\n        </div>\n    \n        <p class="data infected" style="\n          color: ').concat(Object(s.a)(l.b.RISKY).textInWhiteBg,'\n        ">').concat(w("dataType.infected")," ").concat(null===(a=n.properties)||void 0===a?void 0:a.total.infectedNumber,'</p>\n    \n        <p class="data recovered" style="\n          color: ').concat(Object(s.a)(l.b.SAFE).textInWhiteBg,'\n        ">').concat(w("dataType.recovered")," ").concat(null===(i=n.properties)||void 0===i?void 0:i.total.recoveredNumber,'</p>\n    \n        <p class="data dead" style="\n          color: ').concat(Object(s.a)(l.b.DANGEROUS).textInWhiteBg,'\n        ">').concat(w("dataType.dead")," ").concat(null===(c=n.properties)||void 0===c?void 0:c.total.deadNumber,"</p>\n        "),{className:"custom-popup-style"}),o.on({click:function(o){var r;e.resetStyle(R.current),z(o.target),R.current=o.target,r=n,h({type:m.b,payload:r._id}),t&&t(),o.target.openPopup()},mouseover:function(e){u=setTimeout((function(){e.target.openPopup()}),1e3),z(e.target)},mouseout:function(e){var t,n,o,r;clearTimeout(u),(null===(t=R.current)||void 0===t||null===(n=t.feature)||void 0===n?void 0:n._id)===(null===(o=e.target)||void 0===o||null===(r=o.feature)||void 0===r?void 0:r._id)||function(e){var t,n,o=null===(t=e.feature)||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.status,r=N(o,!1),a=r.fillColor,i=r.fillOpacity;e.setStyle({fillColor:a,fillOpacity:i})}(e.target)}})}}).addTo(F.current),F.current.on("movestart",(function(){var e;F.current&&k.current&&(null===(e=F.current)||void 0===e||e.removeLayer(k.current))})),F.current.on("moveend",(function(t){var n,o,r=null===(n=F.current)||void 0===n?void 0:n.getZoom(),a=null===(o=F.current)||void 0===o?void 0:o.getCenter();if((null===a||void 0===a?void 0:a.lat)&&(null===a||void 0===a?void 0:a.lng)&&r&&"URLSearchParams"in window){var i=new URLSearchParams(window.location.search);i.set("lat",JSON.stringify(a.lat)),i.set("lng",JSON.stringify(a.lng)),i.set("zoom",JSON.stringify(r)),i.toString();var l=window.location.pathname+"?"+i.toString();window.history.pushState(null,"",l)}e.eachLayer((function(e){(function(e,t){var n,o,r,a;if(null===(n=e.properties)||void 0===n||null===(o=n.childZones)||void 0===o?void 0:o.length){var i=u(null===e||void 0===e?void 0:e.bbox);a=i[0][0]&&t.getBoundsZoom(i)||0}else a=18;var l=b.find((function(t){var n,o;return(null===t||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.refId)===(null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.parentZone)})),c=u(null===l||void 0===l?void 0:l.bbox),s=l&&c[0][0]&&t.getBoundsZoom(c)||0,p=(null===t||void 0===t?void 0:t.getZoom())||0;return p<=a&&p>s?(r=!!t.getBounds().overlaps(u(e.bbox)),r=!0):r=!1,r})(e.feature,F.current)?F.current.addLayer(e):F.current.removeLayer(e)}))}));var g=i.a.Control.extend({options:{position:"bottomright"},onAdd:d});return S&&F.current.addControl(new g),h({type:m.a,payload:C}),function(){F.current&&F.current.remove&&(F.current.off(),F.current.remove())}}),[b,S]),r.a.createElement("div",{ref:E,style:{width:"100%",height:"100%"}})}},290:function(e,t){},457:function(e,t,n){"use strict";n.r(t);var o=n(45),r=n(259),a=n.n(r),i=(n(152),n(0)),l=n.n(i),c=n(37),u=n(47),s=n(3),p=n(162),d=l.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(22),n.e(8)]).then(n.bind(null,428))})),f=l.a.lazy((function(){return Promise.all([n.e(6),n.e(20),n.e(13)]).then(n.bind(null,430))})),v=l.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(4),n.e(9)]).then(n.bind(null,426))})),g=l.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(16)]).then(n.bind(null,429))})),x=l.a.lazy((function(){return Promise.all([n.e(23),n.e(12)]).then(n.bind(null,431))}));t.default=function(){var e=Object(i.useContext)(c.a).dispatch,t=Object(i.useState)(void 0),n=Object(o.a)(t,2),r=n[0],m=n[1],b=Object(s.f)(),y=Object(s.g)();return Object(i.useEffect)((function(){var t=a()("http://localhost:4000",{query:{token:sessionStorage.token}});m(t),t.on("connect",(function(){t.emit("initial_data"),t.on("push_zones",(function(t){console.log("zones",t),e({type:u.c,payload:t})}))})),t.on("connect_error",(function(e){})),t.on("internal_error",(function(e){})),t.on("error",(function(e){"Authentication error"===e&&b.push({pathname:"/login",state:{from:y.pathname}})}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{position:"relative",zIndex:10,display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"400px 400px 400px"}},l.a.createElement("div",{className:"map"},l.a.createElement(p.a,null)),l.a.createElement("div",{className:"status-controller"},r&&l.a.createElement(g,{socket:r})),l.a.createElement("div",{className:"graph"},l.a.createElement(d,null)),l.a.createElement("div",{className:"graph-controller"},r&&l.a.createElement(v,{socket:r})),l.a.createElement("div",{className:"restrictions"},l.a.createElement(f,null)),l.a.createElement("div",{className:"restriction-controller"},r&&l.a.createElement(x,{socket:r}))))}}}]);
//# sourceMappingURL=Admin.903feec6.chunk.js.map